<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Licenciatura en Turismo - Malla Curricular</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
      color: #333;
    }
    header {
      background: #d46a87; /* rosa fuerte */
      color: white;
      text-align: center;
      padding: 1.2em;
      font-size: 2em;
      font-weight: 600;
      letter-spacing: 1.5px;
      box-shadow: 0 4px 10px rgba(212, 106, 135, 0.6);
    }
    .stats {
      background: #a2d5c6; /* turquesa pastel */
      padding: 1em 2em;
      text-align: center;
      font-size: 1.2em;
      font-weight: 500;
      color: #0f3c35;
      box-shadow: inset 0 0 12px rgba(0,0,0,0.07);
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2em;
      padding: 2em;
      max-width: 1200px;
      margin: auto;
    }
    .unit {
      width: 100%;
      background: #d6f0f0; /* celeste pastel */
      border-radius: 12px;
      padding: 1em 1.5em 2em 1.5em;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
      border: 2px solid #84c5c2;
      transition: border-color 0.3s ease;
    }
    .unit:hover {
      border-color: #d46a87;
      box-shadow: 0 12px 20px rgba(212, 106, 135, 0.3);
    }
    .unit-title {
      font-size: 1.8em;
      margin-bottom: 0.8em;
      color: #d46a87; /* rosa */
      border-left: 6px solid #84c5c2; /* turquesa */
      padding-left: 0.8em;
      font-weight: 600;
      letter-spacing: 1px;
      user-select: none;
    }
    .semester-row {
      display: flex;
      justify-content: center;
      gap: 1em;
      flex-wrap: wrap;
    }
    .semester {
      background: #ffffffcc;
      border-radius: 14px;
      padding: 1em 1.2em;
      min-width: 280px;
      max-width: 280px;
      min-height: 320px;
      box-shadow: 0 6px 12px rgba(100, 120, 140, 0.12);
      display: flex;
      flex-direction: column;
      user-select: none;
    }
    .semester h3 {
      text-align: center;
      color: #2a8d8d; /* turquesa oscuro */
      margin-bottom: 0.8em;
      font-weight: 600;
      letter-spacing: 1.1px;
      border-bottom: 2px solid #d46a87;
      padding-bottom: 0.3em;
    }
    .subject {
      padding: 0.5em 0.8em;
      margin: 0.3em 0;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s, box-shadow 0.3s;
      color: #333;
      font-weight: 500;
      box-shadow: inset 0 0 0 0 transparent;
      user-select: none;
      position: relative;
    }
    .subject:hover:not(.locked):not(.approved) {
      background-color: #d1e8f2;
      box-shadow: 0 0 8px 2px #a7cde9aa;
    }
    .subject.approved {
      background: linear-gradient(135deg, #fab1a0, #ff7675);
      color: white;
      font-weight: 600;
      text-decoration: line-through;
      box-shadow: 0 0 10px 2px #ff6b6baa;
      cursor: pointer;
    }
    .subject.locked {
      background-color: #e7e9f0;
      color: #999999;
      cursor: default;
      box-shadow: none;
      font-style: italic;
    }
    .subject.locked::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 105%;
      top: 50%;
      transform: translateY(-50%);
      white-space: nowrap;
      background-color: #222;
      color: white;
      padding: 0.3em 0.6em;
      border-radius: 5px;
      font-size: 0.85em;
      display: none;
      z-index: 100;
      pointer-events: none;
      max-width: 220px;
      box-sizing: border-box;
    }
    .subject.locked:hover::after {
      display: block;
    }
    .modules {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2em;
      margin-top: 1.5em;
    }
    .module {
      background: #ffffffcc;
      padding: 1.2em 1.5em;
      border-radius: 14px;
      box-shadow: 0 6px 12px rgba(100, 120, 140, 0.15);
      width: 280px;
      user-select: none;
    }
    .module h3 {
      text-align: center;
      color: #d46a87;
      margin-bottom: 1em;
      font-weight: 600;
      letter-spacing: 1.1px;
      border-bottom: 2px solid #2a8d8d;
      padding-bottom: 0.3em;
    }
  </style>
</head>
<body>
  <header>LICENCIATURA EN TURISMO</header>

  <div class="stats">
    <p>Total de Asignaturas: <span id="total-asignaturas">0</span></p>
    <p>Total de Módulos: <span id="total-modulos">0</span></p>
    <p>Créditos Acumulados: <span id="total-creditos">0</span></p>
  </div>

  <div class="container" id="malla-container"></div>

  <script>
    // Datos materias: nombre, créditos y prerrequisitos (array de nombres)
    const materias = {
      // Unidad Preuniversitaria
      "Epistemología del Turismo": { creditos: 0, prereqs: [] },
      "Introducción a la Comunicación Académica": { creditos: 0, prereqs: [] },
      "Pensamiento Computacional": { creditos: 0, prereqs: [] },

      // Unidad Básica - 1er Semestre
      "Matemática Financiera": { creditos: 1.6666, prereqs: ["Pensamiento Computacional"] },
      "Tecnología Aplicada": { creditos: 3.33, prereqs: ["Pensamiento Computacional"] },
      "Teoría Del Turismo": { creditos: 3.33, prereqs: ["Epistemología del Turismo"] },
      "Administración": { creditos: 3.33, prereqs: ["Introducción a la Comunicación Académica"] },
      "Metodología De La Investigación Científica": { creditos: 1.67, prereqs: ["Introducción a la Comunicación Académica"] },
      "Técnicas De Operación Turística": { creditos: 3.33, prereqs: ["Epistemología del Turismo"] },

      // Unidad Básica - 2do Semestre
      "Cosmos Histórico": { creditos: 3.33, prereqs: ["Teoría Del Turismo"] },
      "Bioentorno Turístico": { creditos: 3.33, prereqs: ["Teoría Del Turismo"] },
      "Técnicas De Guiar": { creditos: 3.33, prereqs: ["Técnicas De Operación Turística"] },
      "Hospitalidad": { creditos: 3.33, prereqs: ["Administración"] },
      "Estadística Descriptiva Administrativa": { creditos: 1.6666, prereqs: ["Matemática Financiera", "Tecnología Aplicada"] },
      "Comunicación Oral Y Escrita": { creditos: 1.67, prereqs: ["Metodología De La Investigación Científica"] },

      // Unidad Básica - 3er Semestre
      "Comunidad Y Turismo": { creditos: 1.6666, prereqs: ["Hospitalidad"] },
      "Gastronomía Ancestral Y Patrimonio": { creditos: 3.33, prereqs: ["Hospitalidad"] },
      "Gestión Operativa De Áreas Protegidas": { creditos: 3.33, prereqs: ["Técnicas De Guiar"] },
      "Manifestaciones Plásticas Turísticas": { creditos: 3.33, prereqs: ["Cosmos Histórico", "Comunicación Oral Y Escrita"] },
      "Prospección Intercultural Ecuatoriana": { creditos: 1.6666, prereqs: ["Cosmos Histórico"] },
      "Contabilidad General": { creditos: 3.33, prereqs: ["Estadística Descriptiva Administrativa"] },

      // Unidad Profesional - 4to Semestre
      "Finanzas De Corto Plazo": { creditos: 3.33, prereqs: ["Contabilidad General"] },
      "Gestión Territorial En Turismo": { creditos: 3.33, prereqs: ["Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas"] },
      "Gestión Del Talento Humano Por Competencias": { creditos: 2.5, prereqs: ["Contabilidad General"] },
      "Folklore": { creditos: 1.6666, prereqs: ["Manifestaciones Plásticas Turísticas", "Prospección Intercultural Ecuatoriana"] },
      "Codificación Turística": { creditos: 3.33, prereqs: ["Gestión Operativa De Áreas Protegidas"] },
      "Campismo Y Recreación Turística": { creditos: 1.6666, prereqs: ["Gastronomía Ancestral Y Patrimonio", "Comunidad Y Turismo"] },

      // Unidad Profesional - 5to Semestre
      "Arqueología": { creditos: 1.6666, prereqs: ["Folklore"] },
      "Microeconomía": { creditos: 3.33, prereqs: ["Finanzas De Corto Plazo"] },
      "Iconografía Turística": { creditos: 1.6666, prereqs: ["Campismo Y Recreación Turística"] },
      "Operación De Tours": { creditos: 3.33, prereqs: ["Codificación Turística", "Gestión Territorial En Turismo"] },
      "Fomento Y Regulaciones A La Actividad Turística": { creditos: 3.33, prereqs: ["Gestión Del Talento Humano Por Competencias"] },
      "Desarrollo Del Turismo Sostenible": { creditos: 5, prereqs: [
        "Matemática Financiera", "Tecnología Aplicada", "Teoría Del Turismo", "Administración", "Metodología De La Investigación Científica",
        "Técnicas De Operación Turística", "Cosmos Histórico", "Bioentorno Turístico", "Técnicas De Guiar", "Hospitalidad",
        "Estadística Descriptiva Administrativa", "Comunicación Oral Y Escrita", "Comunidad Y Turismo", "Gastronomía Ancestral Y Patrimonio",
        "Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas", "Prospección Intercultural Ecuatoriana", "Contabilidad General",
        "Finanzas De Corto Plazo", "Gestión Territorial En Turismo", "Gestión Del Talento Humano Por Competencias", "Folklore", "Codificación Turística",
        "Campismo Y Recreación Turística"
      ] },

      // Unidad Profesional - 6to Semestre
      "Planificación Turística": { creditos: 5, prereqs: [
        "Matemática Financiera", "Tecnología Aplicada", "Teoría Del Turismo", "Administración", "Metodología De La Investigación Científica",
        "Técnicas De Operación Turística", "Cosmos Histórico", "Bioentorno Turístico", "Técnicas De Guiar", "Hospitalidad",
        "Estadística Descriptiva Administrativa", "Comunicación Oral Y Escrita", "Comunidad Y Turismo", "Gastronomía Ancestral Y Patrimonio",
        "Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas", "Prospección Intercultural Ecuatoriana", "Contabilidad General",
        "Finanzas De Corto Plazo", "Gestión Territorial En Turismo", "Gestión Del Talento Humano Por Competencias", "Folklore", "Codificación Turística",
        "Campismo Y Recreación Turística", "Arqueología", "Microeconomía", "Iconografía Turística", "Operación De Tours", "Fomento Y Regulaciones A La Actividad Turística",
        "Desarrollo Del Turismo Sostenible"
      ] },
      "Gestión De La Innovación Y Emprendimiento": { creditos: 3.33, prereqs: ["Fomento Y Regulaciones A La Actividad Turística"] },
      "Animación Turística": { creditos: 3.33, prereqs: ["Iconografía Turística"] },
      "Rice - Organización De Eventos": { creditos: 1.6666, prereqs: ["Desarrollo Del Turismo Sostenible"] },
      "Sistemas De Registros Turísticos / Sabre Y Amadeus": { creditos: 1.6666, prereqs: ["Operación De Tours"] },
      "Macroeconomía": { creditos: 3.33, prereqs: ["Microeconomía"] },

      // Unidad Profesional - 7mo Semestre
      "Patrimonio": { creditos: 5, prereqs: ["Planificación Turística", "Gestión De La Innovación Y Emprendimiento", "Animación Turística", "Rice - Organización De Eventos", "Sistemas De Registros Turísticos / Sabre Y Amadeus", "Macroeconomía"] },
      "Gestión De Calidad Y La Productividad": { creditos: 3.33, prereqs: ["Gestión De La Innovación Y Emprendimiento"] },
      "Operación De Alimentos Y Bebidas": { creditos: 1.6666, prereqs: ["Animación Turística"] },
      "Operación Hotelera": { creditos: 3.33, prereqs: ["Sistemas De Registros Turísticos / Sabre Y Amadeus"] },
      "Sociología Del Turismo": { creditos: 3.33, prereqs: ["Animación Turística"] },
      "Tendencias Turísticas": { creditos: 1.6666, prereqs: ["Macroeconomía"] },

      // Unidad de Titulación - 8vo Semestre
      "Formulación Y Evaluación De Proyectos": { creditos: 3.33, prereqs: ["Gestión De Calidad Y La Productividad"] },
      "Integración Regional Turística": { creditos: 5, prereqs: ["Patrimonio", "Gestión De Calidad Y La Productividad", "Operación De Alimentos Y Bebidas", "Operación Hotelera", "Sociología Del Turismo", "Tendencias Turísticas"] },
      "Estrategias Comerciales Turísticas": { creditos: 3.33, prereqs: ["Tendencias Turísticas"] },
      "Redacción Del Trabajo De Titulación": { creditos: 1.6666, prereqs: ["Patrimonio", "Gestión De Calidad Y La Productividad", "Operación De Alimentos Y Bebidas", "Operación Hotelera", "Sociología Del Turismo", "Tendencias Turísticas"] },
      "Apreciación Del Arte Y La Cultura": { creditos: 1.6666, prereqs: ["Patrimonio"] },
      "Turismo Y Gobernanza": { creditos: 3.33, prereqs: ["Operación De Alimentos Y Bebidas", "Sociología Del Turismo"] },

      // Unidad de Titulación - 9no Semestre
      "Gestión Integral De Destinos Turísticos": { creditos: 5, prereqs: ["Formulación Y Evaluación De Proyectos", "Integración Regional Turística", "Estrategias Comerciales Turísticas", "Redacción Del Trabajo De Titulación", "Apreciación Del Arte Y La Cultura", "Turismo Y Gobernanza"] },
      "Técnicas De Negociación Y Comunicación Para El Turismo": { creditos: 3.3333, prereqs: ["Estrategias Comerciales Turísticas"] },
      "Realidad Nacional Y Geopolítica": { creditos: 1.67, prereqs: ["Turismo Y Gobernanza"] },
      "Trabajo De Titulación": { creditos: 3.33, prereqs: ["Redacción Del Trabajo De Titulación"] },
      "Contratación Pública": { creditos: 3.33, prereqs: ["Realidad Nacional Y Geopolítica"] },
      "Liderazgo": { creditos: 3.33, prereqs: ["Trabajo De Titulación"] }
    };

    const estructura = [
      {
        nombre: "Unidad Preuniversitaria",
        semestres: [
          {
            nombre: "Preuniversitario",
            materias: ["Epistemología del Turismo", "Introducción a la Comunicación Académica", "Pensamiento Computacional"]
          }
        ]
      },
      {
        nombre: "Unidad Básica",
        semestres: [
          {
            nombre: "1er Semestre",
            materias: ["Matemática Financiera", "Tecnología Aplicada", "Teoría Del Turismo", "Administración", "Metodología De La Investigación Científica", "Técnicas De Operación Turística"]
          },
          {
            nombre: "2do Semestre",
            materias: ["Cosmos Histórico", "Bioentorno Turístico", "Técnicas De Guiar", "Hospitalidad", "Estadística Descriptiva Administrativa", "Comunicación Oral Y Escrita"]
          },
          {
            nombre: "3er Semestre",
            materias: ["Comunidad Y Turismo", "Gastronomía Ancestral Y Patrimonio", "Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas", "Prospección Intercultural Ecuatoriana", "Contabilidad General"]
          }
        ]
      },
      {
        nombre: "Unidad Profesional",
        semestres: [
          {
            nombre: "4to Semestre",
            materias: ["Finanzas De Corto Plazo", "Gestión Territorial En Turismo", "Gestión Del Talento Humano Por Competencias", "Folklore", "Codificación Turística", "Campismo Y Recreación Turística"]
          },
          {
            nombre: "5to Semestre",
            materias: ["Arqueología", "Microeconomía", "Iconografía Turística", "Operación De Tours", "Fomento Y Regulaciones A La Actividad Turística", "Desarrollo Del Turismo Sostenible"]
          },
          {
            nombre: "6to Semestre",
            materias: ["Planificación Turística", "Gestión De La Innovación Y Emprendimiento", "Animación Turística", "Rice - Organización De Eventos", "Sistemas De Registros Turísticos / Sabre Y Amadeus", "Macroeconomía"]
          },
          {
            nombre: "7mo Semestre",
            materias: ["Patrimonio", "Gestión De Calidad Y La Productividad", "Operación De Alimentos Y Bebidas", "Operación Hotelera", "Sociología Del Turismo", "Tendencias Turísticas"]
          }
        ]
      },
      {
        nombre: "Unidad de Titulación",
        semestres: [
          {
            nombre: "8vo Semestre",
            materias: ["Formulación Y Evaluación De Proyectos", "Integración Regional Turística", "Estrategias Comerciales Turísticas", "Redacción Del Trabajo De Titulación", "Apreciación Del Arte Y La Cultura", "Turismo Y Gobernanza"]
          },
          {
            nombre: "9no Semestre",
            materias: ["Gestión Integral De Destinos Turísticos", "Técnicas De Negociación Y Comunicación Para El Turismo", "Realidad Nacional Y Geopolítica", "Trabajo De Titulación", "Contratación Pública", "Liderazgo"]
          }
        ]
      }
    ];

    // Inicialmente aprobadas vacías (puedes cargar datos guardados aquí)
    let aprobadas = [];

    // Función para chequear si todos los prerrequisitos de una materia están aprobados
    function estaDesbloqueada(nombre) {
      const prereqs = materias[nombre]?.prereqs || [];
      return prereqs.every(p => aprobadas.includes(p));
    }

    // Ordena materias por créditos desc y luego alfabéticamente asc
    function ordenarMateriasPorCreditosYNombre(materiasLista) {
      return materiasLista.slice().sort((a, b) => {
        const creditA = materias[a]?.creditos || 0;
        const creditB = materias[b]?.creditos || 0;
        if (creditA !== creditB) return creditB - creditA;
        return a.localeCompare(b);
      });
    }

    // Actualiza la UI con el estado actual
    function actualizarUI() {
      // Actualizar créditos acumulados
      let totalCreditos = 0;
      aprobadas.forEach(m => {
        totalCreditos += materias[m]?.creditos || 0;
      });
      document.getElementById("total-creditos").textContent = totalCreditos.toFixed(2);

      // Actualizar materias visualmente
      document.querySelectorAll(".subject").forEach(elem => {
        const nombre = elem.dataset.nombre;
        if (aprobadas.includes(nombre)) {
          elem.classList.add("approved");
          elem.classList.remove("locked");
          elem.title = "Click para desmarcar como aprobada";
        } else {
          elem.title = "";
          if (estaDesbloqueada(nombre)) {
            elem.classList.remove("locked");
          } else {
            elem.classList.add("locked");
            const prereqs = materias[nombre]?.prereqs || [];
            elem.dataset.tooltip = "Prerrequisitos: " + prereqs.join(", ");
          }
          elem.classList.remove("approved");
        }
      });
    }

    // Renderiza toda la malla en el contenedor
    function renderizarMalla() {
      const container = document.getElementById("malla-container");
      container.innerHTML = "";

      estructura.forEach(unidad => {
        const unidadDiv = document.createElement("div");
        unidadDiv.className = "unit";

        const tituloUnidad = document.createElement("div");
        tituloUnidad.className = "unit-title";
        tituloUnidad.textContent = unidad.nombre;
        unidadDiv.appendChild(tituloUnidad);

        unidad.semestres.forEach(semestre => {
          const semestreDiv = document.createElement("div");
          semestreDiv.className = "semester-row";

          const semestreCol = document.createElement("div");
          semestreCol.className = "semester";

          const tituloSemestre = document.createElement("h3");
          tituloSemestre.textContent = semestre.nombre;
          semestreCol.appendChild(tituloSemestre);

          // Ordenar materias por créditos y nombre
          const materiasOrdenadas = ordenarMateriasPorCreditosYNombre(semestre.materias);

          materiasOrdenadas.forEach(materiaNombre => {
            const subj = document.createElement("div");
            subj.className = "subject";
            subj.dataset.nombre = materiaNombre;
            subj.textContent = materiaNombre;
            // prerrequisitos en tooltip si bloqueada se ponen después en actualizarUI
            semestreCol.appendChild(subj);
          });

          semestreDiv.appendChild(semestreCol);
          unidadDiv.appendChild(semestreDiv);
        });

        container.appendChild(unidadDiv);
      });
    }

    // Añade eventos click para marcar/desmarcar aprobadas
    function agregarEventos() {
      document.getElementById("malla-container").addEventListener("click", e => {
        const target = e.target;
        if (target.classList.contains("subject")) {
          const nombre = target.dataset.nombre;
          if (aprobadas.includes(nombre)) {
            // desmarcar
            aprobadas = aprobadas.filter(m => m !== nombre);
            actualizarUI();
          } else {
            if (estaDesbloqueada(nombre)) {
              aprobadas.push(nombre);
              actualizarUI();
            }
          }
        }
      });
    }

    // Actualizar contadores total asignaturas y modulos
    function actualizarContadores() {
      let totalAsignaturas = 0;
      estructura.forEach(u => {
        u.semestres.forEach(s => {
          totalAsignaturas += s.materias.length;
        });
      });
      const totalModulos = estructura.length;
      document.getElementById("total-asignaturas").textContent = totalAsignaturas;
      document.getElementById("total-modulos").textContent = totalModulos;
    }

    // Inicializar todo al cargar
    document.addEventListener("DOMContentLoaded", () => {
      actualizarContadores();
      renderizarMalla();
      actualizarUI();
      agregarEventos();
    });
  </script>
</body>
</html>
