<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Curricular - Licenciatura en Turismo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Paleta de colores para el fondo de la p√°gina */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #F7F7F7, #ECECEC, #E0E0E0, #D4D4D4, #C8C8C8, #BDBDBD);
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden; /* Evitar scroll horizontal no deseado */
        }

        /* Contenedor principal para centrar el contenido */
        .main-container {
            width: 95%;
            max-width: 1600px; /* Ancho m√°ximo para pantallas grandes */
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Encabezado atractivo */
        .header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, #1AB4E8, #4DC4ED); /* Degradado de azules marinos */
            color: #fff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            margin-bottom: 20px;
        }

        .header h1 {
            margin: 0;
            font-size: 2.8em;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1.2em;
            font-weight: 300;
            margin-top: 5px;
        }

        /* Secci√≥n de estad√≠sticas */
        .statistics-section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .stat-card {
            background-color: #fff;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            text-align: center;
            flex: 1 1 calc(33% - 40px); /* 3 cards per row on larger screens */
            min-width: 200px; /* Minimum width for responsiveness */
            max-width: 300px;
        }

        .stat-card h3 {
            margin: 0 0 8px 0;
            font-size: 1.2em;
            color: #555;
            font-weight: 600;
        }

        .stat-card p {
            margin: 0;
            font-size: 1.8em;
            font-weight: 700;
            color: #1AB4E8; /* Color principal de la unidad preuniversitaria */
        }

        .stat-card.credits p {
            color: #4DCFE8; /* Un tono diferente para los cr√©ditos */
        }

        /* Contenedor de unidades */
        .units-container {
            display: flex;
            flex-direction: column; /* Apilar unidades verticalmente */
            gap: 40px;
            width: 100%;
        }

        /* Estilos para cada unidad */
        .unit {
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            overflow-x: auto; /* Permitir scroll horizontal si hay muchos semestres */
            -webkit-overflow-scrolling: touch; /* Suavizar scroll en iOS */
        }

        .unit h2 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 700;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block; /* Para que el fondo se ajuste al texto */
            align-self: center;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        /* Colores de las unidades */
        .unit.preuniversitaria {
            background-color: #E1F3FB; /* Azul marino suave */
        }
        .unit.preuniversitaria h2 {
            background-color: #1AB4E8; /* Azul marino intenso */
        }

        .unit.basica {
            background-color: #E6F9E8; /* Verde pradera suave */
        }
        .unit.basica h2 {
            background-color: #1ACB6C; /* Verde pradera intenso */
        }

        .unit.profesional {
            background-color: #FFFBEB; /* Amarillo suave */
        }
        .unit.profesional h2 {
            background-color: #FFD150; /* Amarillo intenso */
        }

        .unit.titulacion {
            background-color: #FFEAEA; /* Rojo t√© de hibisco suave */
        }
        .unit.titulacion h2 {
            background-color: #FF9292; /* Rojo t√© de hibisco intenso */
        }

        /* Contenedor de semestres dentro de cada unidad */
        .semesters-container {
            display: flex;
            flex-wrap: nowrap; /* Evitar que los semestres se envuelvan */
            gap: 25px;
            padding-bottom: 15px; /* Espacio para el scrollbar */
            justify-content: center; /* Centrar semestres horizontalmente */
            align-items: flex-start; /* Alinear semestres en la parte superior */
        }

        /* Estilos para cada semestre */
        .semester {
            flex-shrink: 0; /* Evitar que los semestres se encojan */
            width: 300px; /* Ancho fijo para semestres */
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column; /* Las materias se apilan verticalmente */
            gap: 15px;
            text-align: center;
        }

        .semester h3 {
            margin: 0 0 15px 0;
            font-size: 1.6em;
            font-weight: 700;
            color: #fff;
            padding: 8px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* Colores de los semestres */
        .semester.pre { background-color: #E0F7FA; } .semester.pre h3 { background-color: #008BA3; }
        .semester.s1 { background-color: #E8F5E9; } .semester.s1 h3 { background-color: #1B5E20; }
        .semester.s2 { background-color: #FFF3E0; } .semester.s2 h3 { background-color: #EF6C00; }
        .semester.s3 { background-color: #F3E5F5; } .semester.s3 h3 { background-color: #6A1B9A; }
        .semester.s4 { background-color: #FCE4EC; } .semester.s4 h3 { background-color: #AD1457; }
        .semester.s5 { background-color: #FFFDE7; } .semester.s5 h3 { background-color: #FBC02D; }
        .semester.s6 { background-color: #FFEBEE; } .semester.s6 h3 { background-color: #C62828; }
        .semester.s7 { background-color: #E8F5E9; } .semester.s7 h3 { background-color: #1B5E20; }
        .semester.s8 { background-color: #E3F2FD; } .semester.s8 h3 { background-color: #0D47A1; }
        .semester.s9 { background-color: #FAFAFA; } .semester.s9 h3 { background-color: #424242; }

        /* Estilos para las tarjetas de materias */
        .subject-card, .module-card {
            background-color: #fff; /* Default white, will be overridden by semester/module specific colors */
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            text-align: left;
            min-height: 80px; /* Asegurar altura uniforme */
        }

        .subject-card:hover:not(.blocked):not(.approved),
        .module-card:hover:not(.blocked):not(.approved) {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .subject-card .icon, .module-card .icon {
            font-size: 1.8em;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .subject-card .name, .module-card .name {
            flex-grow: 1;
            font-weight: 600;
            font-size: 0.95em;
        }

        .subject-card .credits, .module-card .credits {
            font-weight: 700;
            color: #666;
            font-size: 0.9em;
            text-align: right;
            flex-shrink: 0;
            width: 40px; /* Ancho fijo para los cr√©ditos */
        }

        /* Estados de las tarjetas */
        .subject-card.approved, .module-card.approved {
            background-color: #d4edda; /* Verde suave para aprobado */
            border: 2px solid #28a745; /* Borde verde */
            box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2);
            cursor: default;
        }

        .subject-card.blocked, .module-card.blocked {
            background-color: #f8d7da; /* Rojo suave para bloqueado */
            border: 2px solid #dc3545; /* Borde rojo */
            opacity: 0.6;
            cursor: not-allowed;
            position: relative;
            pointer-events: auto; /* Permitir eventos de mouse para el tooltip */
        }

        /* Tooltip para materias bloqueadas */
        .tooltip {
            visibility: hidden;
            opacity: 0;
            background-color: rgba(0, 0, 0, 0.85);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 120%; /* Posicionar encima de la tarjeta */
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            transition: opacity 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-size: 0.85em;
        }

        .subject-card.blocked:hover .tooltip,
        .module-card.blocked:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.85) transparent transparent transparent;
        }

        /* Contenedor de m√≥dulos */
        .modules-container {
            display: flex; /* Cambiado a flex */
            flex-direction: row; /* Cambiado a fila para disposici√≥n horizontal */
            flex-wrap: wrap; /* Permitir que los m√≥dulos se envuelvan en pantallas m√°s peque√±as */
            justify-content: center; /* Centrar los bloques de m√≥dulos */
            gap: 40px;
            width: 100%;
        }

        .module-type {
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            background: linear-gradient(to right, #F7F7F7, #EFEFEF, #E5E5E5, #DCDCDC, #D2D2D2, #C8C8C8); /* Fondo general de m√≥dulos */
            flex: 1 1 45%; /* Permite que cada m√≥dulo ocupe aproximadamente la mitad del ancho, con flexibilidad */
            min-width: 350px; /* Ancho m√≠nimo para cada bloque de m√≥dulo */
            display: flex; /* A√±adido para centrar el t√≠tulo del m√≥dulo */
            flex-direction: column; /* Para apilar el t√≠tulo y la cuadr√≠cula de m√≥dulos */
            align-items: center; /* Centrar el contenido dentro del m√≥dulo */
        }

        .module-type h2 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 700;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
            align-self: center;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .module-type.ingles h2 {
            background-color: #006064; /* Azul profundo y enfocado */
        }
        .module-type.computacion h2 {
            background-color: #6A1B9A; /* Morado intenso */
        }

        .modules-grid {
            display: flex;
            flex-direction: column; /* Las materias se apilan verticalmente dentro de cada m√≥dulo */
            flex-wrap: nowrap; /* Evitar que los m√≥dulos se envuelvan */
            gap: 25px;
            padding-bottom: 15px;
            justify-content: center;
            align-items: center; /* Centrar las tarjetas de m√≥dulos */
            width: 100%; /* Asegurar que la cuadr√≠cula ocupe el ancho completo del tipo de m√≥dulo */
        }

        .module-semester { /* Similar a .semester pero para m√≥dulos */
            flex-shrink: 0;
            width: 300px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
            text-align: center;
        }

        /* Colores de los m√≥dulos */
        .module-semester.ingles { background-color: #E0F7FA; } /* Primer tono de ingl√©s */
        .module-semester.computacion { background-color: #F3E5F5; } /* Primer tono de computaci√≥n */

        /* Colores espec√≠ficos para las tarjetas de m√≥dulos dentro de sus tipos */
        .module-type.ingles .module-card {
            background-color: #B2EBF2; /* Segundo tono de ingl√©s */
        }
        .module-type.computacion .module-card {
            background-color: #E1BEE7; /* Segundo tono de computaci√≥n */
        }
        /* Para los siguientes m√≥dulos, se pueden usar los tonos restantes */
        .module-type.ingles .module-card:nth-child(2) { background-color: #80DEEA; }
        .module-type.ingles .module-card:nth-child(3) { background-color: #4DD0E1; }
        .module-type.ingles .module-card:nth-child(4) { background-color: #26C6DA; }
        .module-type.ingles .module-card:nth-child(5) { background-color: #00BCD4; }
        .module-type.ingles .module-card:nth-child(6) { background-color: #0097A7; }
        .module-type.ingles .module-card:nth-child(7) { background-color: #007980; }

        .module-type.computacion .module-card:nth-child(2) { background-color: #CE93D8; }
        .module-type.computacion .module-card:nth-child(3) { background-color: #BA68C8; } /* Usando un tono m√°s saturado */


        /* Bot√≥n de borrar progreso */
        .clear-progress-button {
            background-color: #f44336;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
            align-self: center; /* Centrar el bot√≥n */
            margin-top: 30px;
            box-shadow: 0 4px 10px rgba(244, 67, 54, 0.3);
        }

        .clear-progress-button:hover {
            background-color: #d32f2f;
            transform: translateY(-2px);
        }

        /* Mensaje de completado */
        .completion-modal {
            display: none; /* Oculto por defecto */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            justify-content: center;
            align-items: center;
        }

        .completion-content {
            background: linear-gradient(135deg, #FFD150, #FFDC78); /* Amarillo de unidad profesional */
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            color: #333;
            max-width: 600px;
            animation: fadeInScale 0.5s ease-out;
            position: relative;
        }

        .completion-content h2 {
            font-size: 2.8em;
            color: #fff;
            margin-bottom: 20px;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
        }

        .completion-content p {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 30px;
            color: #555;
        }

        .completion-content .close-button {
            background-color: #FF9292; /* Rojo de unidad de titulaci√≥n */
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(255, 146, 146, 0.3);
        }

        .completion-content .close-button:hover {
            background-color: #d32f2f;
            transform: translateY(-2px);
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Media Queries para Responsividad */
        @media (max-width: 1200px) {
            .stat-card {
                flex: 1 1 calc(50% - 40px); /* 2 cards per row on medium screens */
            }
            .semesters-container {
                justify-content: flex-start; /* Alinear a la izquierda para scroll */
            }
            .modules-container {
                flex-direction: column; /* Volver a apilar m√≥dulos en pantallas m√°s peque√±as */
                align-items: center;
            }
            .module-type {
                flex: 1 1 90%; /* Ocupar casi todo el ancho en pantallas peque√±as */
            }
        }

        @media (max-width: 768px) {
            .main-container {
                width: 98%;
                padding: 15px;
            }
            .header h1 {
                font-size: 2em;
            }
            .header p {
                font-size: 1em;
            }
            .stat-card {
                flex: 1 1 100%; /* 1 card per row on small screens */
            }
            .unit h2, .module-type h2 {
                font-size: 1.8em;
            }
            .semester, .module-semester {
                width: 280px; /* Reducir ancho de semestres/m√≥dulos */
            }
            .subject-card, .module-card {
                min-height: 70px;
            }
            .subject-card .icon, .module-card .icon {
                font-size: 1.5em;
            }
            .subject-card .name, .module-card .name {
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .semester, .module-semester {
                width: 250px; /* A√∫n m√°s peque√±o para m√≥viles */
            }
            .subject-card, .module-card {
                flex-direction: column; /* Apilar icon, name, credits */
                align-items: flex-start;
                min-height: unset;
                padding: 10px;
            }
            .subject-card .icon, .module-card .icon {
                margin-bottom: 5px;
            }
            .subject-card .credits, .module-card .credits {
                width: auto;
                align-self: flex-end; /* Alinear cr√©ditos a la derecha en la parte inferior */
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <header class="header">
            <h1>Malla Curricular Interactiva</h1>
            <p>LICENCIATURA EN TURISMO EN L√çNEA</p>
        </header>

        <section class="statistics-section">
            <div class="stat-card">
                <h3>Total Asignaturas</h3>
                <p id="total-subjects">57</p>
            </div>
            <div class="stat-card">
                <h3>Total M√≥dulos</h3>
                <p id="total-modules">9</p>
            </div>
            <div class="stat-card">
                <h3>Asignaturas Aprobadas</h3>
                <p id="approved-subjects-count">0</p>
            </div>
            <div class="stat-card">
                <h3>M√≥dulos Aprobados</h3>
                <p id="approved-modules-count">0</p>
            </div>
            <div class="stat-card credits">
                <h3>Cr√©ditos Malla</h3>
                <p id="credits-malla">0.00</p>
            </div>
            <div class="stat-card credits">
                <h3>Cr√©ditos M√≥dulos Complementarios</h3>
                <p id="credits-modules">0.00</p>
            </div>
            <div class="stat-card credits">
                <h3>Cr√©ditos Totales</h3>
                <p id="total-credits">0.00</p>
            </div>
        </section>

        <div class="units-container" id="units-container">
            <!-- Las unidades y semestres se renderizar√°n aqu√≠ por JavaScript -->
        </div>

        <div class="modules-container" id="modules-container">
            <!-- Los m√≥dulos se renderizar√°n aqu√≠ por JavaScript -->
        </div>

        <button id="clear-progress-btn" class="clear-progress-button">Borrar Progreso</button>
    </div>

    <!-- Modal de felicitaci√≥n -->
    <div id="completion-modal" class="completion-modal">
        <div class="completion-content">
            <h2>üéìüéä ¬°Felicidades! üéäüéì</h2>
            <p>Has completado tu Carrera de Licenciatura en Turismo.</p>
            <button id="close-completion-modal" class="close-button">Cerrar</button>
        </div>
    </div>

    <script>
        // Datos de la malla curricular
        const curriculumData = [
            // UNIDAD PREUNIVERSITARIA
            { id: 'pre-introduccion-comunicacion', name: 'Introducci√≥n a la Comunicaci√≥n Acad√©mica', credits: 0, icon: '‚úçÔ∏è', prerequisites: [], type: 'subject', unit: 'PRE', semester: 'PRE' },
            { id: 'pre-pensamiento-computacional', name: 'Pensamiento Computacional', credits: 0, icon: 'üíª', prerequisites: [], type: 'subject', unit: 'PRE', semester: 'PRE' },
            { id: 'pre-epistemologia-turismo', name: 'Epistemolog√≠a del Turismo', credits: 0, icon: 'üß†', prerequisites: [], type: 'subject', unit: 'PRE', semester: 'PRE' },

            // UNIDAD B√ÅSICA
            // 1er Semestre
            { id: 's1-administracion', name: 'Administraci√≥n', credits: 3.33, icon: 'üìã', prerequisites: ['pre-introduccion-comunicacion'], type: 'subject', unit: 'BASICA', semester: '1' },
            { id: 's1-tecnologia-aplicada', name: 'Tecnolog√≠a Aplicada', credits: 3.33, icon: 'üõ†Ô∏è', prerequisites: ['pre-pensamiento-computacional'], type: 'subject', unit: 'BASICA', semester: '1' },
            { id: 's1-tecnicas-operacion-turistica', name: 'T√©cnicas de Operaci√≥n Tur√≠stica', credits: 3.33, icon: 'üß≥', prerequisites: ['pre-epistemologia-turismo'], type: 'subject', unit: 'BASICA', semester: '1' },
            { id: 's1-teoria-turismo', name: 'Teor√≠a del Turismo', credits: 3.33, icon: 'üìö', prerequisites: ['pre-epistemologia-turismo'], type: 'subject', unit: 'BASICA', semester: '1' },
            { id: 's1-matematica-financiera', name: 'Matem√°tica Financiera', credits: 1.67, icon: 'üí∞', prerequisites: ['pre-pensamiento-computacional'], type: 'subject', unit: 'BASICA', semester: '1' },
            { id: 's1-metodologia-investigacion', name: 'Metodolog√≠a de la Investigaci√≥n Cient√≠fica', credits: 1.67, icon: 'üî¨', prerequisites: ['pre-introduccion-comunicacion'], type: 'subject', unit: 'BASICA', semester: '1' },

            // 2do Semestre
            { id: 's2-hospitalidad', name: 'Hospitalidad', credits: 3.33, icon: 'ü§ù', prerequisites: ['s1-administracion'], type: 'subject', unit: 'BASICA', semester: '2' },
            { id: 's2-bioentorno-turistico', name: 'Bioentorno Tur√≠stico', credits: 3.33, icon: 'üå±', prerequisites: ['s1-teoria-turismo'], type: 'subject', unit: 'BASICA', semester: '2' },
            { id: 's2-cosmos-historico', name: 'Cosmos Hist√≥rico', credits: 3.33, icon: 'üè∫', prerequisites: ['s1-teoria-turismo'], type: 'subject', unit: 'BASICA', semester: '2' },
            { id: 's2-tecnicas-guiar', name: 'T√©cnicas de Guiar', credits: 3.33, icon: 'üé§', prerequisites: ['s1-tecnicas-operacion-turistica'], type: 'subject', unit: 'BASICA', semester: '2' },
            { id: 's2-comunicacion-oral-escrita', name: 'Comunicaci√≥n Oral y Escrita', credits: 1.67, icon: 'üó£Ô∏è', prerequisites: ['s1-metodologia-investigacion'], type: 'subject', unit: 'BASICA', semester: '2' },
            { id: 's2-estadistica-descriptiva', name: 'Estad√≠stica Descriptiva Administrativa', credits: 1.67, icon: 'üìä', prerequisites: ['s1-matematica-financiera', 's1-tecnologia-aplicada'], type: 'subject', unit: 'BASICA', semester: '2' },

            // 3er Semestre
            { id: 's3-gastronomia-ancestral', name: 'Gastronom√≠a Ancestral y Patrimonio', credits: 3.33, icon: 'üç≤', prerequisites: ['s2-hospitalidad'], type: 'subject', unit: 'BASICA', semester: '3' },
            { id: 's3-gestion-operativa-areas-protegidas', name: 'Gesti√≥n Operativa de √Åreas Protegidas', credits: 3.33, icon: 'üèûÔ∏è', prerequisites: ['s2-tecnicas-guiar'], type: 'subject', unit: 'BASICA', semester: '3' },
            { id: 's3-manifestaciones-plasticas', name: 'Manifestaciones Pl√°sticas Tur√≠sticas', credits: 3.33, icon: 'üé®', prerequisites: ['s2-cosmos-historico', 's2-comunicacion-oral-escrita'], type: 'subject', unit: 'BASICA', semester: '3' },
            { id: 's3-contabilidad-general', name: 'Contabilidad General', credits: 3.33, icon: 'üìí', prerequisites: ['s2-estadistica-descriptiva'], type: 'subject', unit: 'BASICA', semester: '3' },
            { id: 's3-comunidad-turismo', name: 'Comunidad y Turismo', credits: 1.67, icon: 'üèòÔ∏è', prerequisites: ['s2-hospitalidad'], type: 'subject', unit: 'BASICA', semester: '3' },
            { id: 's3-prospeccion-intercultural', name: 'Prospecci√≥n Intercultural Ecuatoriana', credits: 1.67, icon: 'üåé', prerequisites: ['s2-cosmos-historico'], type: 'subject', unit: 'BASICA', semester: '3' },

            // UNIDAD PROFESIONAL
            // 4to Semestre
            { id: 's4-finanzas-corto-plazo', name: 'Finanzas de Corto Plazo', credits: 3.33, icon: 'üìà', prerequisites: ['s3-contabilidad-general'], type: 'subject', unit: 'PROFESIONAL', semester: '4' },
            { id: 's4-gestion-territorial-turismo', name: 'Gesti√≥n Territorial en Turismo', credits: 3.33, icon: 'üåç', prerequisites: ['s3-gestion-operativa-areas-protegidas', 's3-manifestaciones-plasticas'], type: 'subject', unit: 'PROFESIONAL', semester: '4' },
            { id: 's4-codificacion-turistica', name: 'Codificaci√≥n Tur√≠stica', credits: 3.33, icon: 'üß©', prerequisites: ['s3-gestion-operativa-areas-protegidas'], type: 'subject', unit: 'PROFESIONAL', semester: '4' },
            { id: 's4-gestion-talento-humano', name: 'Gesti√≥n del Talento Humano por Competencias', credits: 2.5, icon: 'üë•', prerequisites: ['s3-contabilidad-general'], type: 'subject', unit: 'PROFESIONAL', semester: '4' },
            { id: 's4-campismo-recreacion', name: 'Campismo y Recreaci√≥n Tur√≠stica', credits: 1.67, icon: '‚õ∫', prerequisites: ['s3-gastronomia-ancestral', 's3-comunidad-turismo'], type: 'subject', unit: 'PROFESIONAL', semester: '4' },
            { id: 's4-folklore', name: 'Folklore', credits: 1.67, icon: 'üé≠', prerequisites: ['s3-manifestaciones-plasticas', 's3-prospeccion-intercultural'], type: 'subject', unit: 'PROFESIONAL', semester: '4' },

            // 5to Semestre
            { id: 's5-desarrollo-turismo-sostenible', name: 'Desarrollo del Turismo Sostenible', credits: 5, icon: '‚ôªÔ∏è', prerequisites: ['s1-administracion', 's1-tecnologia-aplicada', 's1-tecnicas-operacion-turistica', 's1-teoria-turismo', 's1-matematica-financiera', 's1-metodologia-investigacion', 's2-hospitalidad', 's2-bioentorno-turistico', 's2-cosmos-historico', 's2-tecnicas-guiar', 's2-comunicacion-oral-escrita', 's2-estadistica-descriptiva', 's3-gastronomia-ancestral', 's3-gestion-operativa-areas-protegidas', 's3-manifestaciones-plasticas', 's3-contabilidad-general', 's3-comunidad-turismo', 's3-prospeccion-intercultural'], type: 'subject', unit: 'PROFESIONAL', semester: '5' },
            { id: 's5-fomento-regulaciones', name: 'Fomento y Regulaciones Tur√≠sticas', credits: 3.33, icon: '‚öñÔ∏è', prerequisites: ['s4-gestion-talento-humano'], type: 'subject', unit: 'PROFESIONAL', semester: '5' },
            { id: 's5-microeconomia', name: 'Microeconom√≠a', credits: 3.33, icon: 'üè¶', prerequisites: ['s4-finanzas-corto-plazo'], type: 'subject', unit: 'PROFESIONAL', semester: '5' },
            { id: 's5-operacion-tours', name: 'Operaci√≥n de Tours', credits: 3.33, icon: 'üöç', prerequisites: ['s4-codificacion-turistica', 's4-gestion-territorial-turismo'], type: 'subject', unit: 'PROFESIONAL', semester: '5' },
            { id: 's5-iconografia-turistica', name: 'Iconograf√≠a Tur√≠stica', credits: 1.67, icon: 'üñºÔ∏è', prerequisites: ['s4-campismo-recreacion'], type: 'subject', unit: 'PROFESIONAL', semester: '5' },
            { id: 's5-arqueologia', name: 'Arqueolog√≠a', credits: 1.67, icon: 'üóø', prerequisites: ['s4-folklore'], type: 'subject', unit: 'PROFESIONAL', semester: '5' },

            // 6to Semestre
            { id: 's6-planificacion-turistica', name: 'Planificaci√≥n Tur√≠stica', credits: 5, icon: 'üóìÔ∏è', prerequisites: ['s5-desarrollo-turismo-sostenible', 's5-fomento-regulaciones', 's5-microeconomia', 's5-operacion-tours', 's5-iconografia-turistica', 's5-arqueologia'], type: 'subject', unit: 'PROFESIONAL', semester: '6' },
            { id: 's6-gestion-innovacion-emprendimiento', name: 'Gesti√≥n de la Innovaci√≥n y Emprendimiento', credits: 3.33, icon: 'üöÄ', prerequisites: ['s5-fomento-regulaciones'], type: 'subject', unit: 'PROFESIONAL', semester: '6' },
            { id: 's6-animacion-turistica', name: 'Animaci√≥n Tur√≠stica', credits: 3.33, icon: 'üé¨', prerequisites: ['s5-iconografia-turistica'], type: 'subject', unit: 'PROFESIONAL', semester: '6' },
            { id: 's6-macroeconomia', name: 'Macroeconom√≠a', credits: 3.33, icon: 'üåê', prerequisites: ['s5-microeconomia'], type: 'subject', unit: 'PROFESIONAL', semester: '6' },
            { id: 's6-rice-eventos', name: 'Rice ‚Äì Organizaci√≥n de Eventos', credits: 1.67, icon: 'üìÖ', prerequisites: ['s5-desarrollo-turismo-sostenible'], type: 'subject', unit: 'PROFESIONAL', semester: '6' },
            { id: 's6-sistemas-registros-turisticos', name: 'Sistemas de Registros Tur√≠sticos / Sabre y Amadeus', credits: 1.67, icon: 'üßæ', prerequisites: ['s5-operacion-tours'], type: 'subject', unit: 'PROFESIONAL', semester: '6' },

            // 7mo Semestre
            { id: 's7-patrimonio', name: 'Patrimonio', credits: 5, icon: 'üèõÔ∏è', prerequisites: ['s6-planificacion-turistica', 's6-gestion-innovacion-emprendimiento', 's6-animacion-turistica', 's6-macroeconomia', 's6-rice-eventos', 's6-sistemas-registros-turisticos'], type: 'subject', unit: 'PROFESIONAL', semester: '7' },
            { id: 's7-gestion-calidad-productividad', name: 'Gesti√≥n de Calidad y la Productividad', credits: 3.33, icon: '‚úÖ', prerequisites: ['s6-gestion-innovacion-emprendimiento'], type: 'subject', unit: 'PROFESIONAL', semester: '7' },
            { id: 's7-operacion-hotelera', name: 'Operaci√≥n Hotelera', credits: 3.33, icon: 'üè®', prerequisites: ['s6-sistemas-registros-turisticos'], type: 'subject', unit: 'PROFESIONAL', semester: '7' },
            { id: 's7-sociologia-turismo', name: 'Sociolog√≠a del Turismo', credits: 3.33, icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', prerequisites: ['s6-animacion-turistica'], type: 'subject', unit: 'PROFESIONAL', semester: '7' },
            { id: 's7-operacion-alimentos-bebidas', name: 'Operaci√≥n de Alimentos y Bebidas', credits: 1.67, icon: 'üçΩÔ∏è', prerequisites: ['s6-animacion-turistica'], type: 'subject', unit: 'PROFESIONAL', semester: '7' },
            { id: 's7-tendencias-turisticas', name: 'Tendencias Tur√≠sticas', credits: 1.67, icon: 'üìà', prerequisites: ['s6-macroeconomia'], type: 'subject', unit: 'PROFESIONAL', semester: '7' },

            // 8vo Semestre (Unidad Profesional y Titulaci√≥n se solapan aqu√≠)
            { id: 's8-turismo-gobernanza', name: 'Turismo y Gobernanza', credits: 3.33, icon: 'üèõÔ∏è', prerequisites: ['s7-operacion-alimentos-bebidas', 's7-sociologia-turismo'], type: 'subject', unit: 'PROFESIONAL', semester: '8' },

            // UNIDAD DE TITULACI√ìN
            // 8vo Semestre (continuaci√≥n)
            { id: 's8-integracion-regional-turistica', name: 'Integraci√≥n Regional Tur√≠stica', credits: 5, icon: 'ü§ù', prerequisites: ['s7-patrimonio', 's7-gestion-calidad-productividad', 's7-operacion-hotelera', 's7-sociologia-turismo', 's7-operacion-alimentos-bebidas', 's7-tendencias-turisticas'], type: 'subject', unit: 'TITULACION', semester: '8' },
            { id: 's8-formulacion-evaluacion-proyectos', name: 'Formulaci√≥n y Evaluaci√≥n de Proyectos', credits: 3.33, icon: 'üìê', prerequisites: ['s7-gestion-calidad-productividad'], type: 'subject', unit: 'TITULACION', semester: '8' },
            { id: 's8-estrategias-comerciales', name: 'Estrategias Comerciales Tur√≠sticas', credits: 3.33, icon: 'üéØ', prerequisites: ['s7-tendencias-turisticas'], type: 'subject', unit: 'TITULACION', semester: '8' },
            { id: 's8-apreciacion-arte-cultura', name: 'Apreciaci√≥n del Arte y la Cultura', credits: 1.67, icon: 'üñåÔ∏è', prerequisites: ['s7-patrimonio'], type: 'subject', unit: 'TITULACION', semester: '8' },
            { id: 's8-redaccion-trabajo-titulacion', name: 'Redacci√≥n del Trabajo de Titulaci√≥n', credits: 1.67, icon: 'üìñ', prerequisites: ['s7-patrimonio', 's7-gestion-calidad-productividad', 's7-operacion-hotelera', 's7-sociologia-turismo', 's7-operacion-alimentos-bebidas', 's7-tendencias-turisticas'], type: 'subject', unit: 'TITULACION', semester: '8' },

            // 9no Semestre
            { id: 's9-gestion-integral-destinos', name: 'Gesti√≥n Integral de Destinos Tur√≠sticos', credits: 5, icon: 'üåü', prerequisites: ['s8-integracion-regional-turistica', 's8-formulacion-evaluacion-proyectos', 's8-estrategias-comerciales', 's8-apreciacion-arte-cultura', 's8-redaccion-trabajo-titulacion', 's8-turismo-gobernanza'], type: 'subject', unit: 'TITULACION', semester: '9' },
            { id: 's9-contratacion-publica', name: 'Contrataci√≥n P√∫blica', credits: 3.33, icon: 'üìù', prerequisites: ['s8-formulacion-evaluacion-proyectos'], type: 'subject', unit: 'TITULACION', semester: '9' },
            { id: 's9-tecnicas-negociacion-comunicacion', name: 'T√©cnicas de Negociaci√≥n y Comunicaci√≥n para el Turismo', credits: 3.33, icon: 'ü§ùüó£Ô∏è', prerequisites: ['s8-estrategias-comerciales'], type: 'subject', unit: 'TITULACION', semester: '9' },
            { id: 's9-trabajo-titulacion', name: 'Trabajo de Titulaci√≥n', credits: 3.33, icon: 'üéì', prerequisites: ['s8-redaccion-trabajo-titulacion'], type: 'subject', unit: 'TITULACION', semester: '9' },
            { id: 's9-liderazgo', name: 'Liderazgo', credits: 1.67, icon: 'üëë', prerequisites: ['s8-apreciacion-arte-cultura'], type: 'subject', unit: 'TITULACION', semester: '9' },
            { id: 's9-realidad-nacional-geopolitica', name: 'Realidad Nacional y Geopol√≠tica', credits: 1.67, icon: 'üåè', prerequisites: ['s8-turismo-gobernanza'], type: 'subject', unit: 'TITULACION', semester: '9' },

            // M√ìDULOS
            // Ingl√©s
            { id: 'mod-ingles-a1-minus', name: '-A1', credits: 2.08, icon: 'üî¥üèÜ', prerequisites: [], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },
            { id: 'mod-ingles-a1', name: 'A1', credits: 2.08, icon: 'üü†üèÜ', prerequisites: ['mod-ingles-a1-minus'], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },
            { id: 'mod-ingles-a2', name: 'A2', credits: 2.08, icon: 'üü°üèÜ', prerequisites: ['mod-ingles-a1'], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },
            { id: 'mod-ingles-b1', name: 'B1', credits: 2.08, icon: 'üü¢üèÜ', prerequisites: ['mod-ingles-a2'], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },
            { id: 'mod-ingles-b2', name: 'B2', credits: 2.08, icon: 'üîµüèÜ', prerequisites: ['mod-ingles-b1'], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },
            { id: 'mod-ingles-c1', name: 'C1', credits: 2.08, icon: 'üü£üèÜ', prerequisites: ['mod-ingles-b2'], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },
            { id: 'mod-ingles-c2', name: 'C2', credits: 2.08, icon: 'üü§üèÜ', prerequisites: ['mod-ingles-c1'], type: 'module', unit: 'MODULO-INGLES', semester: 'Ingl√©s' },

            // Computaci√≥n
            { id: 'mod-comp-windows-word-internet', name: 'Windows ‚Äì Word ‚Äì Internet', credits: 8, icon: 'ü™üüìÑüåê', prerequisites: [], type: 'module', unit: 'MODULO-COMPUTACION', semester: 'Computaci√≥n' },
            { id: 'mod-comp-excel-powerpoint', name: 'Excel ‚Äì PowerPoint', credits: 8, icon: 'üìäüìΩÔ∏è', prerequisites: ['mod-comp-windows-word-internet'], type: 'module', unit: 'MODULO-COMPUTACION', semester: 'Computaci√≥n' },
        ];

        // Mapeo de colores para unidades y semestres
        const unitColors = {
            'PRE': { bg: '#E1F3FB', title: '#1AB4E8' }, // Azules marinos
            'BASICA': { bg: '#E6F9E8', title: '#1ACB6C' }, // Verdes pradera
            'PROFESIONAL': { bg: '#FFFBEB', title: '#FFD150' }, // Amarillos suaves
            'TITULACION': { bg: '#FFEAEA', title: '#FF9292' }, // Rojos t√© de hibisco
            'MODULO-INGLES': { bg: '#F7F7F7', title: '#006064' }, // Fondo de m√≥dulos, t√≠tulo de ingl√©s
            'MODULO-COMPUTACION': { bg: '#F7F7F7', title: '#6A1B9A' } // Fondo de m√≥dulos, t√≠tulo de computaci√≥n
        };

        const semesterColors = {
            'PRE': { bg: '#E0F7FA', title: '#008BA3', cardTones: ['#E0F7FA', '#B2EBF2', '#80DEEA', '#4DD0E1', '#26C6DA', '#00BCD4'] },
            '1': { bg: '#E8F5E9', title: '#1B5E20', cardTones: ['#E8F5E9', '#C8E6C9', '#A5D6A7', '#81C784', '#66BB6A', '#43A047'] },
            '2': { bg: '#FFF3E0', title: '#EF6C00', cardTones: ['#FFF3E0', '#FFE0B2', '#FFCC80', '#FFB74D', '#FFA726', '#FF9800'] },
            '3': { bg: '#F3E5F5', title: '#6A1B9A', cardTones: ['#F3E5F5', '#E1BEE7', '#CE93D8', '#BA68C8', '#AB47BC', '#9C27B0'] },
            '4': { bg: '#FCE4EC', title: '#AD1457', cardTones: ['#FCE4EC', '#F8BBD0', '#F48FB1', '#F06292', '#EC407A', '#E91E63'] },
            '5': { bg: '#FFFDE7', title: '#FBC02D', cardTones: ['#FFFDE7', '#FFF9C4', '#FFF59D', '#FFF176', '#FFEE58', '#FFEB3B'] },
            '6': { bg: '#FFEBEE', title: '#C62828', cardTones: ['#FFEBEE', '#FFCDD2', '#EF9A9A', '#E57373', '#EF5350', '#F44336'] },
            '7': { bg: '#E8F5E9', title: '#1B5E20', cardTones: ['#E8F5E9', '#C8E6C9', '#A5D6A7', '#81C784', '#66BB6A', '#388E3C'] },
            '8': { bg: '#E3F2FD', title: '#0D47A1', cardTones: ['#E3F2FD', '#BBDEFB', '#90CAF9', '#64B5F6', '#42A5F5', '#1976D2'] },
            '9': { bg: '#FAFAFA', title: '#424242', cardTones: ['#FAFAFA', '#F5F5F5', '#EEEEEE', '#E0E0E0', '#BDBDBD', '#757575'] },
        };

        const moduleColors = {
            'Ingl√©s': {
                bg: '#E0F7FA', // Primer tono general de ingl√©s
                title: '#006064',
                cardTones: ['#E0F7FA', '#B2EBF2', '#80DEEA', '#4DD0E1', '#26C6DA', '#00BCD4', '#0097A7', '#007980']
            },
            'Computaci√≥n': {
                bg: '#F3E5F5', // Primer tono general de computaci√≥n
                title: '#6A1B9A',
                cardTones: ['#F3E5F5', '#E1BEE7', '#CE93D8', '#BA68C8', '#AB47BC']
            }
        };

        let approvedSubjects = new Set();
        let approvedModules = new Set();

        // Elementos del DOM
        const unitsContainer = document.getElementById('units-container');
        const modulesContainer = document.getElementById('modules-container');
        const clearProgressBtn = document.getElementById('clear-progress-btn');
        const completionModal = document.getElementById('completion-modal');
        const closeCompletionModalBtn = document.getElementById('close-completion-modal');

        // Funci√≥n para guardar el progreso en localStorage
        function saveProgress() {
            localStorage.setItem('approvedSubjects', JSON.stringify(Array.from(approvedSubjects)));
            localStorage.setItem('approvedModules', JSON.stringify(Array.from(approvedModules)));
        }

        // Funci√≥n para cargar el progreso desde localStorage
        function loadProgress() {
            const savedSubjects = localStorage.getItem('approvedSubjects');
            const savedModules = localStorage.getItem('approvedModules');
            if (savedSubjects) {
                approvedSubjects = new Set(JSON.parse(savedSubjects));
            }
            if (savedModules) {
                approvedModules = new Set(JSON.parse(savedModules));
            }
        }

        // Funci√≥n para verificar si una materia/m√≥dulo est√° aprobado
        function isApproved(id, type) {
            return type === 'subject' ? approvedSubjects.has(id) : approvedModules.has(id);
        }

        // Funci√≥n para verificar si todos los prerrequisitos est√°n aprobados
        function checkPrerequisites(subjectId) {
            const subject = curriculumData.find(s => s.id === subjectId);
            if (!subject || !subject.prerequisites || subject.prerequisites.length === 0) {
                return { blocked: false, missing: [] };
            }

            const missingPrerequisites = [];
            for (const prereqId of subject.prerequisites) {
                const prereq = curriculumData.find(s => s.id === prereqId);
                if (!prereq || !isApproved(prereq.id, prereq.type)) {
                    missingPrerequisites.push(prereq ? prereq.name : `ID desconocido: ${prereqId}`);
                }
            }
            return { blocked: missingPrerequisites.length > 0, missing: missingPrerequisites };
        }

        // Funci√≥n para actualizar el estado visual de todas las materias/m√≥dulos
        function updateAllSubjectStates() {
            curriculumData.forEach(item => {
                const cardElement = document.getElementById(`card-${item.id}`);
                if (cardElement) {
                    const { blocked, missing } = checkPrerequisites(item.id);
                    const isItemApproved = isApproved(item.id, item.type);

                    cardElement.classList.remove('approved', 'blocked');
                    cardElement.querySelector('.credits').style.display = 'none'; // Ocultar cr√©ditos por defecto

                    if (isItemApproved) {
                        cardElement.classList.add('approved');
                        cardElement.querySelector('.credits').style.display = 'block'; // Mostrar cr√©ditos si est√° aprobado
                    } else if (blocked) {
                        cardElement.classList.add('blocked');
                        // Actualizar tooltip
                        const tooltip = cardElement.querySelector('.tooltip');
                        if (tooltip) {
                            tooltip.textContent = `Faltan: ${missing.join(', ')}`;
                        }
                    } else {
                        // Materia no aprobada pero no bloqueada (disponible para aprobar)
                        cardElement.querySelector('.credits').style.display = 'none';
                    }
                }
            });
            updateStatistics();
            checkCompletion();
        }

        // Funci√≥n para manejar el clic en una materia/m√≥dulo
        function handleCardClick(id, type) {
            const { blocked } = checkPrerequisites(id);
            const isItemApproved = isApproved(id, type);

            if (blocked && !isItemApproved) {
                // No permitir aprobar si est√° bloqueado y no aprobado
                return;
            }

            if (isItemApproved) {
                // Si ya est√° aprobado, desaprobarlo
                if (type === 'subject') {
                    approvedSubjects.delete(id);
                } else {
                    approvedModules.delete(id);
                }

                // Desaprobar recursivamente las materias que dependen de esta
                curriculumData.forEach(item => {
                    if (item.prerequisites && item.prerequisites.includes(id)) {
                        const itemIsApproved = isApproved(item.id, item.type);
                        if (itemIsApproved) {
                            if (item.type === 'subject') {
                                approvedSubjects.delete(item.id);
                            } else {
                                approvedModules.delete(item.id);
                            }
                            // Recursivamente desaprobar dependientes de este item
                            handleCardClick(item.id, item.type);
                        }
                    }
                });
            } else {
                // Si no est√° aprobado, aprobarlo
                if (type === 'subject') {
                    approvedSubjects.add(id);
                } else {
                    approvedModules.add(id);
                }
            }

            saveProgress();
            updateAllSubjectStates(); // Actualizar todos los estados despu√©s del cambio
        }

        // Funci√≥n para actualizar las estad√≠sticas
        function updateStatistics() {
            let approvedSubjectsCount = 0;
            let approvedModulesCount = 0;
            let creditsMalla = 0;
            let creditsModules = 0;

            curriculumData.forEach(item => {
                if (isApproved(item.id, item.type)) {
                    if (item.type === 'subject') {
                        approvedSubjectsCount++;
                        creditsMalla += item.credits;
                    } else if (item.type === 'module') {
                        approvedModulesCount++;
                        creditsModules += item.credits;
                    }
                }
            });

            document.getElementById('approved-subjects-count').textContent = approvedSubjectsCount;
            document.getElementById('approved-modules-count').textContent = approvedModulesCount;
            document.getElementById('credits-malla').textContent = creditsMalla.toFixed(2);
            document.getElementById('credits-modules').textContent = creditsModules.toFixed(2);
            document.getElementById('total-credits').textContent = (creditsMalla + creditsModules).toFixed(2);

            // Actualizar totales fijos
            document.getElementById('total-subjects').textContent = curriculumData.filter(item => item.type === 'subject').length;
            document.getElementById('total-modules').textContent = curriculumData.filter(item => item.type === 'module').length;
        }

        // Funci√≥n para renderizar la malla curricular
        function renderCurriculum() {
            unitsContainer.innerHTML = ''; // Limpiar contenedores existentes
            modulesContainer.innerHTML = '';

            const units = {};
            const moduleTypes = {};

            curriculumData.forEach(item => {
                if (item.type === 'subject') {
                    if (!units[item.unit]) {
                        units[item.unit] = {};
                    }
                    if (!units[item.unit][item.semester]) {
                        units[item.unit][item.semester] = [];
                    }
                    units[item.unit][item.semester].push(item);
                } else if (item.type === 'module') {
                    if (!moduleTypes[item.unit]) {
                        moduleTypes[item.unit] = [];
                    }
                    moduleTypes[item.unit].push(item);
                }
            });

            // Ordenar unidades y semestres
            const orderedUnits = ['PRE', 'BASICA', 'PROFESIONAL', 'TITULACION'];
            orderedUnits.forEach(unitKey => {
                if (units[unitKey]) {
                    const unitDiv = document.createElement('div');
                    unitDiv.className = `unit ${unitKey.toLowerCase()}`;
                    unitDiv.style.backgroundColor = unitColors[unitKey].bg;

                    const unitTitle = document.createElement('h2');
                    unitTitle.textContent = unitKey === 'PRE' ? 'UNIDAD PREUNIVERSITARIA' :
                                            unitKey === 'BASICA' ? 'UNIDAD B√ÅSICA' :
                                            unitKey === 'PROFESIONAL' ? 'UNIDAD PROFESIONAL' :
                                            'UNIDAD DE TITULACI√ìN';
                    unitTitle.style.backgroundColor = unitColors[unitKey].title;
                    unitDiv.appendChild(unitTitle);

                    const semestersContainer = document.createElement('div');
                    semestersContainer.className = 'semesters-container';

                    const orderedSemesters = Object.keys(units[unitKey]).sort((a, b) => {
                        if (a === 'PRE') return -1;
                        if (b === 'PRE') return 1;
                        return parseInt(a) - parseInt(b);
                    });

                    orderedSemesters.forEach(semesterKey => {
                        const semesterDiv = document.createElement('div');
                        semesterDiv.className = `semester s${semesterKey.toLowerCase()}`;
                        semesterDiv.style.backgroundColor = semesterColors[semesterKey].bg;

                        const semesterTitle = document.createElement('h3');
                        semesterTitle.textContent = semesterKey === 'PRE' ? 'PRE' : `${semesterKey}er semestre`;
                        semesterTitle.style.backgroundColor = semesterColors[semesterKey].title;
                        semesterDiv.appendChild(semesterTitle);

                        units[unitKey][semesterKey].forEach((subject, index) => {
                            const card = document.createElement('div');
                            card.id = `card-${subject.id}`;
                            card.className = 'subject-card';
                            // Asignar color de tarjeta c√≠clicamente de la paleta del semestre
                            card.style.backgroundColor = semesterColors[semesterKey].cardTones[index % semesterColors[semesterKey].cardTones.length];

                            card.innerHTML = `
                                <span class="icon">${subject.icon}</span>
                                <span class="name">${subject.name}</span>
                                <span class="credits" style="display:none;">${subject.credits.toFixed(2)}</span>
                                <div class="tooltip"></div>
                            `;
                            card.addEventListener('click', () => handleCardClick(subject.id, subject.type));
                            semesterDiv.appendChild(card);
                        });
                        semestersContainer.appendChild(semesterDiv);
                    });
                    unitDiv.appendChild(semestersContainer);
                    unitsContainer.appendChild(unitDiv);
                }
            });

            // Renderizar m√≥dulos
            const orderedModuleTypes = ['MODULO-INGLES', 'MODULO-COMPUTACION'];
            orderedModuleTypes.forEach(moduleTypeKey => {
                if (moduleTypes[moduleTypeKey]) {
                    const moduleTypeDiv = document.createElement('div');
                    moduleTypeDiv.className = `module-type ${moduleTypeKey.toLowerCase().replace('modulo-', '')}`;
                    // El fondo general del m√≥dulo ya est√° en CSS, aqu√≠ no se asigna.

                    const moduleTypeTitle = document.createElement('h2');
                    moduleTypeTitle.textContent = moduleTypeKey === 'MODULO-INGLES' ? 'M√ìDULOS DE INGL√âS' : 'M√ìDULOS DE COMPUTACI√ìN';
                    moduleTypeTitle.style.backgroundColor = unitColors[moduleTypeKey].title;
                    moduleTypeDiv.appendChild(moduleTypeTitle);

                    const modulesGrid = document.createElement('div');
                    modulesGrid.className = 'modules-grid';

                    // Los m√≥dulos no tienen semestres, se agrupan por tipo
                    moduleTypes[moduleTypeKey].forEach((mod, index) => {
                        const card = document.createElement('div');
                        card.id = `card-${mod.id}`;
                        card.className = 'module-card';
                        // Asignar color de tarjeta c√≠clicamente de la paleta del m√≥dulo
                        const currentModuleColors = moduleTypeKey === 'MODULO-INGLES' ? moduleColors['Ingl√©s'] : moduleColors['Computaci√≥n'];
                        card.style.backgroundColor = currentModuleColors.cardTones[index % currentModuleColors.cardTones.length];

                        card.innerHTML = `
                            <span class="icon">${mod.icon}</span>
                            <span class="name">${mod.name}</span>
                            <span class="credits" style="display:none;">${mod.credits.toFixed(2)}</span>
                            <div class="tooltip"></div>
                        `;
                        card.addEventListener('click', () => handleCardClick(mod.id, mod.type));
                        modulesGrid.appendChild(card);
                    });
                    moduleTypeDiv.appendChild(modulesGrid);
                    modulesContainer.appendChild(moduleTypeDiv);
                }
            });

            updateAllSubjectStates(); // Asegurar que los estados iniciales sean correctos
        }

        // Funci√≥n para borrar todo el progreso
        function clearProgress() {
            if (confirm('¬øEst√°s seguro de que quieres borrar todo tu progreso? Esta acci√≥n no se puede deshacer.')) {
                approvedSubjects.clear();
                approvedModules.clear();
                saveProgress();
                renderCurriculum(); // Volver a renderizar para resetear visualmente
                updateStatistics();
                completionModal.style.display = 'none'; // Ocultar mensaje de completado
            }
        }

        // Funci√≥n para verificar si la carrera est√° completada
        function checkCompletion() {
            const allSubjectsApproved = curriculumData.filter(item => item.type === 'subject').every(s => approvedSubjects.has(s.id));
            const allModulesApproved = curriculumData.filter(item => item.type === 'module').every(m => approvedModules.has(m.id));

            if (allSubjectsApproved && allModulesApproved) {
                completionModal.style.display = 'flex'; // Mostrar el modal
            } else {
                completionModal.style.display = 'none'; // Asegurarse de que est√© oculto si no est√° completo
            }
        }

        // Event Listeners
        clearProgressBtn.addEventListener('click', clearProgress);
        closeCompletionModalBtn.addEventListener('click', () => {
            completionModal.style.display = 'none';
        });

        // Inicializaci√≥n al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            renderCurriculum();
            updateStatistics();
            checkCompletion();
        });
    </script>
</body>
</html>
