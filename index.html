<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Licenciatura en Turismo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f9fc;
    margin: 0; padding: 0 10px 30px 10px;
    color: #222;
  }
  header {
    text-align: center;
    padding: 20px 0;
    font-size: 2rem;
    font-weight: bold;
    color: #4B0082; /* morado */
    text-transform: uppercase;
  }
  .unidad {
    margin-bottom: 40px;
  }
  .unidad > h2 {
    background: #4B0082;
    color: white;
    padding: 10px;
    margin: 0 0 10px 0;
    text-transform: uppercase;
    border-radius: 5px;
  }
  .nivel {
    margin-left: 15px;
    margin-bottom: 25px;
  }
  .nivel > h3 {
    background: #3A5998; /* azul */
    color: white;
    padding: 8px 12px;
    margin: 0 0 10px 0;
    border-radius: 4px;
    font-weight: 600;
  }
  .materias-lista {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    position: relative;
  }
  .materia {
    cursor: pointer;
    padding: 7px 12px;
    border-radius: 5px;
    font-size: 0.9rem;
    user-select: none;
    border: 2px solid transparent;
    min-width: 180px;
    max-width: 220px;
    box-sizing: border-box;
    transition: background-color 0.3s, border-color 0.3s;
    position: relative;
  }
  /* Colores base por unidad */
  .unidad-preuniversitaria .materia {
    background-color: #b7e4c7; /* verde suave */
    border-color: #40916c; /* verde */
    color: #1b4332;
  }
  .unidad-basica .materia {
    background-color: #ade8f4; /* celeste suave */
    border-color: #0077b6; /* celeste */
    color: #023e8a;
  }
  .unidad-profesional .materia {
    background-color: #d0bfff; /* púrpura suave */
    border-color: #6930c3; /* púrpura */
    color: #240046;
  }
  .unidad-titulacion .materia {
    background-color: #caf0f8; /* azul muy suave */
    border-color: #0077b6; /* azul */
    color: #03045e;
  }
  .unidad-modulos .materia {
    background-color: #e0bbe4; /* morado suave */
    border-color: #6a4c93; /* morado */
    color: #4a235a;
  }
  /* Estados */
  .materia.locked {
    background-color: #f0f0f0 !important;
    color: #aaa !important;
    border-color: #ddd !important;
    cursor: not-allowed;
    text-decoration: line-through;
  }
  .materia.approved {
    border-color: #008000;
    background-color: #007f00;
    color: white !important;
  }
  /* Tooltip */
  .materia[data-creditos]:hover::after {
    content: attr(data-creditos) " créditos";
    position: absolute;
    background: #333;
    color: white;
    padding: 3px 7px;
    border-radius: 4px;
    font-size: 0.75rem;
    margin-top: 25px;
    white-space: nowrap;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
  }
</style>
</head>
<body>

<header>Licenciatura en Turismo - Malla Curricular</header>

<div id="malla"></div>

<script>
  const materias = [
    // Unidad Preuniversitaria (Pre)
    { nombre: "Epistemología del Turismo", unidad: "preuniversitaria", nivel: "PRE", creditos: 0, prerrequisitos: [] },
    { nombre: "Introducción a la Comunicación Académica", unidad: "preuniversitaria", nivel: "PRE", creditos: 0, prerrequisitos: [] },
    { nombre: "Pensamiento Computacional", unidad: "preuniversitaria", nivel: "PRE", creditos: 0, prerrequisitos: [] },

    // Unidad Básica - 1er Semestre
    { nombre: "Matemática Financiera", unidad: "basica", nivel: "1er Semestre", creditos: 1.6666, prerrequisitos: ["Pensamiento Computacional"] },
    { nombre: "Tecnología Aplicada", unidad: "basica", nivel: "1er Semestre", creditos: 3.33, prerrequisitos: ["Pensamiento Computacional"] },
    { nombre: "Teoría Del Turismo", unidad: "basica", nivel: "1er Semestre", creditos: 3.33, prerrequisitos: ["Epistemología del Turismo"] },
    { nombre: "Administración", unidad: "basica", nivel: "1er Semestre", creditos: 3.33, prerrequisitos: ["Introducción a la Comunicación Académica"] },
    { nombre: "Metodología De La Investigación Científica", unidad: "basica", nivel: "1er Semestre", creditos: 1.67, prerrequisitos: ["Introducción a la Comunicación Académica"] },
    { nombre: "Técnicas De Operación Turística", unidad: "basica", nivel: "1er Semestre", creditos: 3.33, prerrequisitos: ["Epistemología del Turismo"] },

    // Unidad Básica - 2do Semestre
    { nombre: "Cosmos Histórico", unidad: "basica", nivel: "2do Semestre", creditos: 3.33, prerrequisitos: ["Teoría Del Turismo"] },
    { nombre: "Bioentorno Turístico", unidad: "basica", nivel: "2do Semestre", creditos: 3.33, prerrequisitos: ["Teoría Del Turismo"] },
    { nombre: "Técnicas De Guiar", unidad: "basica", nivel: "2do Semestre", creditos: 3.33, prerrequisitos: ["Técnicas De Operación Turística"] },
    { nombre: "Hospitalidad", unidad: "basica", nivel: "2do Semestre", creditos: 3.33, prerrequisitos: ["Administración"] },
    { nombre: "Estadística Descriptiva Administrativa", unidad: "basica", nivel: "2do Semestre", creditos: 1.6666, prerrequisitos: ["Matemática Financiera", "Tecnología Aplicada"] },
    { nombre: "Comunicación Oral Y Escrita", unidad: "basica", nivel: "2do Semestre", creditos: 1.67, prerrequisitos: ["Metodología De La Investigación Científica"] },

    // Unidad Básica - 3er Semestre
    { nombre: "Comunidad Y Turismo", unidad: "basica", nivel: "3er Semestre", creditos: 1.6666, prerrequisitos: ["Hospitalidad"] },
    { nombre: "Gastronomía Ancestral Y Patrimonio", unidad: "basica", nivel: "3er Semestre", creditos: 3.33, prerrequisitos: ["Hospitalidad"] },
    { nombre: "Gestión Operativa De Áreas Protegidas", unidad: "basica", nivel: "3er Semestre", creditos: 3.33, prerrequisitos: ["Técnicas De Guiar"] },
    { nombre: "Manifestaciones Plásticas Turísticas", unidad: "basica", nivel: "3er Semestre", creditos: 3.33, prerrequisitos: ["Cosmos Histórico", "Comunicación Oral Y Escrita"] },
    { nombre: "Prospección Intercultural Ecuatoriana", unidad: "basica", nivel: "3er Semestre", creditos: 1.6666, prerrequisitos: ["Cosmos Histórico"] },
    { nombre: "Contabilidad General", unidad: "basica", nivel: "3er Semestre", creditos: 3.33, prerrequisitos: ["Estadística Descriptiva Administrativa"] },

    // Unidad Profesional - 4to Semestre
    { nombre: "Finanzas De Corto Plazo", unidad: "profesional", nivel: "4to Semestre", creditos: 3.33, prerrequisitos: ["Contabilidad General"] },
    { nombre: "Gestión Territorial En Turismo", unidad: "profesional", nivel: "4to Semestre", creditos: 3.33, prerrequisitos: ["Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas"] },
    { nombre: "Gestión Del Talento Humano Por Competencias", unidad: "profesional", nivel: "4to Semestre", creditos: 2.5, prerrequisitos: ["Contabilidad General"] },
    { nombre: "Folklore", unidad: "profesional", nivel: "4to Semestre", creditos: 1.6666, prerrequisitos: ["Manifestaciones Plásticas Turísticas", "Prospección Intercultural Ecuatoriana"] },
    { nombre: "Codificación Turística", unidad: "profesional", nivel: "4to Semestre", creditos: 3.33, prerrequisitos: ["Gestión Operativa De Áreas Protegidas"] },
    { nombre: "Campismo Y Recreación Turística", unidad: "profesional", nivel: "4to Semestre", creditos: 1.6666, prerrequisitos: ["Gastronomía Ancestral Y Patrimonio", "Comunidad Y Turismo"] },

    // Unidad Profesional - 5to Semestre
    { nombre: "Arqueología", unidad: "profesional", nivel: "5to Semestre", creditos: 1.6666, prerrequisitos: ["Folklore"] },
    { nombre: "Microeconomía", unidad: "profesional", nivel: "5to Semestre", creditos: 3.33, prerrequisitos: ["Finanzas De Corto Plazo"] },
    { nombre: "Iconografía Turística", unidad: "profesional", nivel: "5to Semestre", creditos: 1.6666, prerrequisitos: ["Campismo Y Recreación Turística"] },
    { nombre: "Operación De Tours", unidad: "profesional", nivel: "5to Semestre", creditos: 3.33, prerrequisitos: ["Codificación Turística", "Gestión Territorial En Turismo"] },
    { nombre: "Fomento Y Regulaciones A La Actividad Turística", unidad: "profesional", nivel: "5to Semestre", creditos: 3.33, prerrequisitos: ["Gestión Del Talento Humano Por Competencias"] },
    { nombre: "Desarrollo Del Turismo Sostenible", unidad: "profesional", nivel: "5to Semestre", creditos: 5, prerrequisitos: [
      "Matemática Financiera", "Tecnología Aplicada", "Teoría Del Turismo", "Administración",
      "Metodología De La Investigación Científica", "Técnicas De Operación Turística", "Cosmos Histórico",
      "Bioentorno Turístico", "Técnicas De Guiar", "Hospitalidad", "Estadística Descriptiva Administrativa",
      "Comunicación Oral Y Escrita", "Comunidad Y Turismo", "Gastronomía Ancestral Y Patrimonio",
      "Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas",
      "Prospección Intercultural Ecuatoriana", "Contabilidad General", "Finanzas De Corto Plazo",
      "Gestión Territorial En Turismo", "Gestión Del Talento Humano Por Competencias", "Folklore",
      "Codificación Turística", "Campismo Y Recreación Turística"
    ] },

    // Unidad Profesional - 6to Semestre
    { nombre: "Planificación Turística", unidad: "profesional", nivel: "6to Semestre", creditos: 5, prerrequisitos: [
      "Matemática Financiera", "Tecnología Aplicada", "Teoría Del Turismo", "Administración",
      "Metodología De La Investigación Científica", "Técnicas De Operación Turística", "Cosmos Histórico",
      "Bioentorno Turístico", "Técnicas De Guiar", "Hospitalidad", "Estadística Descriptiva Administrativa",
      "Comunicación Oral Y Escrita", "Comunidad Y Turismo", "Gastronomía Ancestral Y Patrimonio",
      "Gestión Operativa De Áreas Protegidas", "Manifestaciones Plásticas Turísticas",
      "Prospección Intercultural Ecuatoriana", "Contabilidad General", "Finanzas De Corto Plazo",
      "Gestión Territorial En Turismo", "Gestión Del Talento Humano Por Competencias", "Folklore",
      "Codificación Turística", "Campismo Y Recreación Turística", "Arqueología", "Microeconomía",
      "Iconografía Turística", "Operación De Tours", "Fomento Y Regulaciones A La Actividad Turística",
      "Desarrollo Del Turismo Sostenible"
    ] },
    { nombre: "Gestión De La Innovación Y Emprendimiento", unidad: "profesional", nivel: "6to Semestre", creditos: 3.33, prerrequisitos: ["Fomento Y Regulaciones A La Actividad Turística"] },
    { nombre: "Animación Turística", unidad: "profesional", nivel: "6to Semestre", creditos: 3.33, prerrequisitos: ["Iconografía Turística"] },
    { nombre: "Rice - Organización De Eventos", unidad: "profesional", nivel: "6to Semestre", creditos: 1.6666, prerrequisitos: ["Desarrollo Del Turismo Sostenible"] },
    { nombre: "Sistemas De Registros Turísticos / Sabre Y Amadeus", unidad: "profesional", nivel: "6to Semestre", creditos: 1.6666, prerrequisitos: ["Operación De Tours"] },
    { nombre: "Macroeconomía", unidad: "profesional", nivel: "6to Semestre", creditos: 3.33, prerrequisitos: ["Microeconomía"] },

    // Unidad Profesional - 7mo Semestre
    { nombre: "Patrimonio", unidad: "profesional", nivel: "7mo Semestre", creditos: 5, prerrequisitos: ["Planificación Turística", "Gestión De La Innovación Y Emprendimiento", "Animación Turística", "Rice - Organización De Eventos", "Sistemas De Registros Turísticos / Sabre Y Amadeus", "Macroeconomía"] },
    { nombre: "Gestión De Calidad Y La Productividad", unidad: "profesional", nivel: "7mo Semestre", creditos: 3.33, prerrequisitos: ["Gestión De La Innovación Y Emprendimiento"] },
    { nombre: "Operación De Alimentos Y Bebidas", unidad: "profesional", nivel: "7mo Semestre", creditos: 1.6666, prerrequisitos: ["Animación Turística"] },
    { nombre: "Operación Hotelera", unidad: "profesional", nivel: "7mo Semestre", creditos: 3.33, prerrequisitos: ["Sistemas De Registros Turísticos / Sabre Y Amadeus"] },
    { nombre: "Sociología Del Turismo", unidad: "profesional", nivel: "7mo Semestre", creditos: 3.33, prerrequisitos: ["Animación Turística"] },
    { nombre: "Tendencias Turísticas", unidad: "profesional", nivel: "7mo Semestre", creditos: 1.6666, prerrequisitos: ["Macroeconomía"] },

    // Unidad de Titulación - 8vo Semestre
    { nombre: "Formulación Y Evaluación De Proyectos", unidad: "titulacion", nivel: "8vo Semestre", creditos: 3.33, prerrequisitos: ["Gestión De Calidad Y La Productividad"] },
    { nombre: "Integración Regional Turística", unidad: "titulacion", nivel: "8vo Semestre", creditos: 5, prerrequisitos: ["Patrimonio", "Gestión De Calidad Y La Productividad", "Operación De Alimentos Y Bebidas", "Operación Hotelera", "Sociología Del Turismo", "Tendencias Turísticas"] },
    { nombre: "Estrategias Comerciales Turísticas", unidad: "titulacion", nivel: "8vo Semestre", creditos: 3.33, prerrequisitos: ["Tendencias Turísticas"] },
    { nombre: "Redacción Del Trabajo De Titulación", unidad: "titulacion", nivel: "8vo Semestre", creditos: 1.6666, prerrequisitos: ["Patrimonio", "Gestión De Calidad Y La Productividad", "Operación De Alimentos Y Bebidas", "Operación Hotelera", "Sociología Del Turismo", "Tendencias Turísticas"] },
    { nombre: "Apreciación Del Arte Y La Cultura", unidad: "titulacion", nivel: "8vo Semestre", creditos: 1.6666, prerrequisitos: ["Patrimonio"] },

    // Unidad de Titulación - 9no Semestre
    { nombre: "Trabajo De Titulación", unidad: "titulacion", nivel: "9no Semestre", creditos: 10, prerrequisitos: ["Formulación Y Evaluación De Proyectos", "Integración Regional Turística", "Estrategias Comerciales Turísticas", "Redacción Del Trabajo De Titulación", "Apreciación Del Arte Y La Cultura"] },

    // Unidad de Módulos - Inglés
    { nombre: "Inglés 1", unidad: "modulos", nivel: "Módulo Inglés", creditos: 1.5, prerrequisitos: [] },
    { nombre: "Inglés 2", unidad: "modulos", nivel: "Módulo Inglés", creditos: 1.5, prerrequisitos: ["Inglés 1"] },
    { nombre: "Inglés 3", unidad: "modulos", nivel: "Módulo Inglés", creditos: 1.5, prerrequisitos: ["Inglés 2"] },
    { nombre: "Inglés 4", unidad: "modulos", nivel: "Módulo Inglés", creditos: 1.5, prerrequisitos: ["Inglés 3"] },

    // Unidad de Módulos - Computación
    { nombre: "Computación 1", unidad: "modulos", nivel: "Módulo Computación", creditos: 1.5, prerrequisitos: [] },
    { nombre: "Computación 2", unidad: "modulos", nivel: "Módulo Computación", creditos: 1.5, prerrequisitos: ["Computación 1"] },
    { nombre: "Computación 3", unidad: "modulos", nivel: "Módulo Computación", creditos: 1.5, prerrequisitos: ["Computación 2"] },
  ];

  // Unidades y niveles para organización y orden
  const unidadesNiveles = {
    preuniversitaria: { nombre: "UNIDAD PREUNIVERSITARIA", niveles: ["PRE"] },
    basica: {
      nombre: "UNIDAD BÁSICA",
      niveles: ["1er Semestre", "2do Semestre", "3er Semestre"],
    },
    profesional: {
      nombre: "UNIDAD PROFESIONAL",
      niveles: ["4to Semestre", "5to Semestre", "6to Semestre", "7mo Semestre"],
    },
    titulacion: {
      nombre: "UNIDAD DE TITULACIÓN",
      niveles: ["8vo Semestre", "9no Semestre"],
    },
    modulos: {
      nombre: "MÓDULOS",
      niveles: ["Módulo Inglés", "Módulo Computación"],
    },
  };

  const STORAGE_KEY = "mallaAprobadasTurismo";

  function guardarEstado(aprobadas) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(aprobadas));
  }
  function cargarEstado() {
    return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
  }

  function puedeAprobar(materia, aprobadas) {
    return materia.prerrequisitos.every(pr => aprobadas.includes(pr));
  }

  function crearMalla() {
    const container = document.getElementById("malla");
    container.innerHTML = "";

    for (const [unidadKey, unidadData] of Object.entries(unidadesNiveles)) {
      const unidadDiv = document.createElement("section");
      unidadDiv.classList.add("unidad", `unidad-${unidadKey}`);

      const unidadTitulo = document.createElement("h2");
      unidadTitulo.textContent = unidadData.nombre;
      unidadDiv.appendChild(unidadTitulo);

      unidadData.niveles.forEach(nivel => {
        const nivelDiv = document.createElement("div");
        nivelDiv.classList.add("nivel");

        const nivelTitulo = document.createElement("h3");
        nivelTitulo.textContent = nivel;
        nivelDiv.appendChild(nivelTitulo);

        const materiasNivel = materias
          .filter(m => m.unidad === unidadKey && m.nivel === nivel)
          .sort((a, b) => {
            if (b.creditos !== a.creditos) return b.creditos - a.creditos;
            return a.nombre.localeCompare(b.nombre);
          });

        const lista = document.createElement("div");
        lista.classList.add("materias-lista");

        const aprobadas = cargarEstado();

        materiasNivel.forEach(m => {
          const divMateria = document.createElement("div");
          divMateria.classList.add("materia");
          divMateria.textContent = m.nombre;
          divMateria.setAttribute("data-creditos", m.creditos.toFixed(2));
          if (aprobadas.includes(m.nombre)) {
            divMateria.classList.add("approved");
          } else if (!puedeAprobar(m, aprobadas)) {
            divMateria.classList.add("locked");
          }
          divMateria.addEventListener("click", () => {
            const estado = cargarEstado();
            if (divMateria.classList.contains("locked")) return;
            if (estado.includes(m.nombre)) {
              const idx = estado.indexOf(m.nombre);
              estado.splice(idx, 1);
            } else {
              estado.push(m.nombre);
            }
            guardarEstado(estado);
            crearMalla();
          });
          lista.appendChild(divMateria);
        });

        nivelDiv.appendChild(lista);
        unidadDiv.appendChild(nivelDiv);
      });

      container.appendChild(unidadDiv);
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    crearMalla();
  });
</script>

</body>
</html>
